
<%#
      whats working / whats not working
      States on number of decisions. reflections. radito chart of good/bad reflections
      active log selection
%>

<div class="pt-4 bg-white dark:bg-slate top-0 border-b-[.5px] border-light-grey dark:border-dark-grey">
  <div class="flex flex-row justify-between text-1xl ml-6 pb-4 font-bold dark:text-white">
    <div class="hidden sm:flex">Home</div>
    <%= render HistoraWeb.LayoutView, "mobile_navigation.html", conn: @conn, name: "Home" %>
    <%= render HistoraWeb.SidebarView, "decision_new.html", Map.put(assigns, :action, Routes.decision_path(@conn, :create)) %>
  </div>
</div>

<div style="white-space:nowrap;" class="flex bg-white dark:bg-slate top-0 border-b-[.5px] border-light-grey dark:border-dark-grey">

    <%= render HistoraWeb.SidebarView, "reflections_scheduled.html", users_scheduled_reflections: @users_scheduled_reflections, conn: @conn %>

    <%= unless Enum.empty?(@users_past_due_reflections) do %>
        <%= render HistoraWeb.SidebarView, "reflections_past_due.html", users_past_due_reflections: @users_past_due_reflections, conn: @conn %>
    <% end %>

    <div class="hidden sm:flex ml-8 py-4 px-6  border-x-[.5px] border-light-grey dark:border-dark-grey">
        <%= unless Enum.empty?(@users_active_approvals) do %>
            <%= render HistoraWeb.SidebarView, "approvals_active.html", users_active_approvals: @users_active_approvals, conn: @conn %>
        <% end %>
    </div>
</div>

<%= unless Enum.empty?(@users_active_approvals) do %>
    <div class="flex sm:hidden pl-6 py-4 border-b-[.5px] border-light-grey dark:border-dark-grey">
        <%= render HistoraWeb.SidebarView, "approvals_active.html", users_active_approvals: @users_active_approvals, conn: @conn %>
    </div>
<% end %>

<div class="sm:hidden">
    <div class="py-6 px-10 flex flex-col justify-center items-center border-b-[.5px] border-light-grey dark:text-white dark:border-dark-grey">
        <div class="text-xs mb-6 text-grey dark:text-white">
            All Organization
        </div>
        <div class="flex">
            <div class="flex flex-col justify-center items-center">
                <div class="mb-2"><%= @decision_count %></div>
                <div class="font-bold text-sm">Decisions</div>

            </div>
            <div class="flex flex-col justify-center items-center ml-8">
                <div class="mb-2"><%= @reflection_count %></div>
                <div class="font-bold text-sm">Reflections</div>
            </div>
        </div>
    </div>

    <div class="py-6 px-10 flex flex-col justify-center items-center border-b-[.5px] border-light-grey dark:text-white dark:border-dark-grey">
        <div class="text-xs mb-6 text-grey dark:text-white">
            Reflection Rate
        </div>
        <div class="flex text-white">
            <div class="flex flex-col justify-center items-center">
                <div class="mb-2"><%= @reflection_continuation_percentage %>%</div>
                <div class="font-bold text-sm text-primary">Continuation</div>
            </div>
            <div class="flex flex-col justify-center items-center ml-8">
                <div class="mb-2"><%= @reflection_reversal_percentage %>%</div>
                <div class="font-bold text-sm text-red">Reversal</div>
            </div>
        </div>
    </div>
</div>

<div class="hidden sm:flex border-b-[.5px] border-light-grey dark:text-white dark:border-dark-grey">
    <div class="flex">
        <div class="py-46 px-10 flex flex-col justify-center items-center">
            <div class="text-xs mb-6 text-grey dark:text-white">
                All Organization
            </div>
            <div class="flex">
                <div class="flex flex-col justify-center items-center">
                    <div class="mb-2"><%= @decision_count %></div>
                    <div class="font-bold text-sm">Decisions</div>

                </div>
                <div class="flex flex-col justify-center items-center ml-8">
                    <div class="mb-2"><%= @reflection_count %></div>
                    <div class="font-bold text-sm">Reflections</div>
                </div>
            </div>
        </div>

        <div class="py-6 px-10 flex flex-col justify-center items-center border-x-[.5px] border-light-grey dark:border-dark-grey">
            <div class="text-xs mb-6 text-grey dark:text-white">
                Reflection Rate
            </div>
            <div class="flex">
                <div class="flex flex-col justify-center items-center">
                    <div class="mb-2"><%= @reflection_continuation_percentage %>%</div>
                    <div class="font-bold text-sm text-primary">Continuation</div>
                </div>
                <div class="flex flex-col justify-center items-center ml-8">
                    <div class="mb-2"><%= @reflection_reversal_percentage %>%</div>
                    <div class="font-bold text-sm text-red">Reversal</div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="bg-white dark:bg-slate top-0 border-b-[.5px] border-light-grey dark:border-dark-grey">

    <div class="text-xs mx-6 py-4 dark:text-white">
        Activity
    </div>

    <div class="text-xs mx-6">
        <%= for log <- @logs do %>
            <%= link to: Routes.decision_path(@conn, :show, log.decision_id) do %>
                <div class="mb-4 text-dark-grey">
                    <%= log.user.email %>
                        <%= log.event %>
                    on <%= Histora.Users.formate_time_stamp(log.updated_at) %>
                </div>
            <% end %>
        <% end %>

    </div>


</div>
